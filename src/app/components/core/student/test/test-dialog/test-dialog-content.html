<div class="d-flex align-items-center justify-content-between m-b-16 p-x-20 p-t-16">
  <h3>{{action}} test</h3>
  <button mat-icon-button mat-dialog-close class="d-flex justify-content-center">
    <i-tabler name="x" class="icon-20 d-flex"></i-tabler>
  </button>
</div>

<!-- -------------------------------------------------------------- -->
<!-- Add Employee -->
<!-- -------------------------------------------------------------- -->

@if(action !== 'Delete') {
<mat-dialog-content>
  <form #filterForm="ngForm">
    <div class="row">
      <div class="col-lg-6">
        <mat-form-field class="w-100" appearance="outline">
          <mat-label>Tipo de test</mat-label>
          <input type="text" placeholder="Buscar tipo de test" aria-label="Tipo de test" matInput required id="testType"
            name="testType" [formControl]="testTypeControl" [matAutocomplete]="TestTypeAuto" />
          <mat-autocomplete autoActiveFirstOption #TestTypeAuto="matAutocomplete" [displayWith]="displayEntityName"
            (optionSelected)="onTestTypeSelected($event)">
            @for(type of filteredTestTypes(); track type.code) {
            <mat-option [value]="type">
              {{ type.name }}
            </mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>
      </div>
      <div class="col-lg-6">
        <mat-form-field class="w-100" appearance="outline">
          <mat-label>Seleccione una dificultad</mat-label>
          <input type="text" placeholder="Buscar dificultad" aria-label="Dificultad" matInput id="difficulty"
            name="difficulty" [formControl]="difficultyControl" [matAutocomplete]="difficultyAuto" />
          <mat-autocomplete autoActiveFirstOption #difficultyAuto="matAutocomplete" [displayWith]="displayEntityName"
            (optionSelected)="onDifficultySelected($event)">
            @for(difficulty of filteredDifficulties(); track difficulty.code) {
            <mat-option [value]="difficulty">
              {{ difficulty.name }}
            </mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>
      </div>
      <div class="col-lg-6">
        <mat-form-field class="w-100" appearance="outline">
          <mat-label>Seleccione una categoría</mat-label>
          <input type="text" placeholder="Buscar categoría" aria-label="Categoría" matInput id="category"
            name="category" [formControl]="categoryControl" [matAutocomplete]="categoryAuto" />
          <mat-autocomplete autoActiveFirstOption #categoryAuto="matAutocomplete" [displayWith]="displayEntityName"
            (optionSelected)="onCategorySelected($event)">
            @for(category of filteredCategories(); track category.id) {
            <mat-option [value]="category">
              {{ category.name }}
              <span class="text-xs text-gray-500 ml-2">({{ category.id }})</span>
            </mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>
      </div>
      <div class="col-lg-6">
        <mat-form-field class="w-100" appearance="outline">
          <mat-label>Seleccione una sección</mat-label>
          <input type="text" placeholder="Buscar sección" aria-label="Sección" matInput id="section" name="section"
            [formControl]="sectionControl" [matAutocomplete]="sectionAuto" />
          <mat-autocomplete autoActiveFirstOption #sectionAuto="matAutocomplete" [displayWith]="displayEntityName"
            (optionSelected)="onSectionSelected($event)">
            @for(section of filteredSections(); track section.id) {
            <mat-option [value]="section">
              {{ section.name }}
            </mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>
      </div>
      <div class="col-lg-6">
        <mat-form-field class="w-100" appearance="outline">
          <mat-label>Seleccione un tema</mat-label>
          <input type="text" placeholder="Buscar tema" aria-label="Tema" required matInput id="topic" name="topic"
            [formControl]="topicControl" [matAutocomplete]="topicAuto" />
          <mat-autocomplete autoActiveFirstOption #topicAuto="matAutocomplete" [displayWith]="displayEntityName"
            (optionSelected)="onTopicSelected($event)">
            @for(topic of filteredTopics(); track topic.id) {
            <mat-option [value]="topic">
              {{ topic.name }}
            </mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>
      </div>
      <div class="col-lg-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Número de preguntas</mat-label>
          <input type="number" matInput required aria-label="Preguntas" id="numQuestions" name="numQuestions"
            [formControl]="numQuestions" placeholder="Preguntas del test" />
        </mat-form-field>
      </div>
      <div class="col-lg-6 m-b-30">
        <mat-slide-toggle id="timed" name="timed" class="w-100" [formControl]="timed">¿Test
          temporizado?</mat-slide-toggle>
      </div>
    </div>
    <button mat-flat-button (click)="doAction()" mat-flat-button [disabled]="!filterForm.valid">
      {{action}}
    </button>
    <button mat-flat-button class="m-l-8 bg-error text-white" (click)="closeDialog()">
      Cancel
    </button>
  </form>
</mat-dialog-content>
}
<!-- -------------------------------------------------------------- -->
<!-- Delete Employee info -->
<!-- -------------------------------------------------------------- -->

@else {
<div class="p-x-24 m-y-8">
  <p class="f-s-14">
    Sure to delete <span class="f-w-600">{{local_data.id}}</span> ?
  </p>
</div>
<div mat-dialog-actions class="p-x-24 p-b-24">
  <button (click)="doAction()" mat-flat-button>{{action}}</button>
  <button mat-flat-button (click)="closeDialog()" class="m-l-8 bg-error text-white">
    Cancel
  </button>
</div>
}